{% extends "base.html" %}
{% block title %}Clients â€” CRM Local{% endblock %}
{% block content %}
<section class="panel">
<div class="panel-header">
<h2>Clients</h2>
<form class="search" hx-get="/_clients" hx-target="#list" hx-trigger="keyup changed delay:300ms">
<input type="text" name="q" placeholder="Rechercher (nom, email, tagâ€¦)" value="{{ q }}" />
<button class="btn ghost" type="submit">Rechercher</button>
</form>
</div>


<div class="table-wrap" id="list">
<table class="table">
<thead>
<tr>
<th>Nom</th>
<th>Email</th>
<th>TÃ©lÃ©phone</th>
<th>Tags</th>
<th>Statut</th>
<th class="th-actions">Actions</th>
</tr>
</thead>
<tbody>
{% for c in clients %}
<tr>
<td data-label="Nom">{{ c.name }}</td>
<td data-label="Email">{{ c.email or "â€”" }}</td>
<td data-label="TÃ©lÃ©phone">{{ c.phone or "â€”" }}</td>
<td data-label="Tags">{{ c.tags or "â€”" }}</td>
<td data-label="Statut"><span class="badge {{ c.status or 'neutral' }}">{{ c.status or "â€”" }}</span></td>
<td class="actions">
<form action="/clients/{{ c.id }}/delete" method="post" onsubmit="return confirm('Supprimer {{ c.name }} ?')">
<button class="btn danger sm" title="Supprimer">ğŸ—‘ï¸</button>
</form>
</td>
</tr>
{% endfor %}
{% if not clients %}
<tr><td colspan="6" class="empty">Aucun rÃ©sultat</td></tr>
{% endif %}
</tbody>
</table>
</div>
</section>


<section class="panel">
<div class="panel-header">
<h2>Nouveau client</h2>
</div>
<form action="/clients/new" method="post" class="form-grid">
<label>
<span>Nom *</span>
<input name="name" required placeholder="Ex: Dupont SARL"/>
</label>
<label>
<span>Email</span>
<input name="email" type="email" placeholder="contact@exemple.fr"/>
</label>
<label>
<span>TÃ©lÃ©phone</span>
<input name="phone" placeholder="06 12 34 56 78"/>
{% endblock %}