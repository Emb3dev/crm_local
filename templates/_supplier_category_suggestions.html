{% set selected_lower = (selected_categories or []) | map('lower') | list %}
{% if categories %}
  <div class="mt-2 flex flex-wrap gap-2">
    {% for category in categories %}
      {% if category and category.lower() not in selected_lower %}
        <button
          type="button"
          data-category-option="{{ category }}"
          class="inline-flex items-center rounded-full border border-slate-200 bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700 transition-colors duration-200 hover:border-indigo-200 hover:bg-indigo-50 hover:text-indigo-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-200 dark:border-white/10 dark:bg-white/10 dark:text-white dark:hover:border-indigo-400/50 dark:hover:bg-indigo-500/10 dark:hover:text-indigo-100"
        >
          {{ category }}
        </button>
      {% endif %}
    {% endfor %}
  </div>
{% elif query %}
  <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">Aucune catégorie trouvée pour "{{ query }}".</p>
{% else %}
  <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">Aucune catégorie enregistrée pour le moment.</p>
{% endif %}
